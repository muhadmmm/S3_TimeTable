<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>S3 Time Table</title>
  <style>
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }
    th, td {
      border: 1px solid #dddddd;
      text-align: center;
      padding: 8px;
    }
    th {
      background-color: #f2f2f2;
    }
    tr:nth-child(even) {
      background-color: #f9f9f9;
    }
  </style>
</head>
<body>
  <table>
    <tr>
      <th>Day</th>
      <th>9:15-10:15</th>
      <th>10:15-11:15</th>
      <th>11:30-12:30</th>
      <th>1:15-2:15</th>
      <th>2:15-3:15</th>
      <th>3:15-4:15</th>
    </tr>
    <tr>
      <td>Monday</td>
      <td>DCF</td>
      <td>DBMS</td>
      <td>DBMS</td>
      <td>DBMS/C (LAB)</td>
      <td>DBMS/C (LAB)</td>
      <td>DBMS/C (LAB)</td>
    </tr>
    <tr>
      <td>Tuesday</td>
      <td>Prog-C</td>
      <td>CO</td>
      <td>CSH (LAB)</td>
      <td>CSH (LAB)</td>
      <td>CSH (LAB)</td>
      <td>CSH (LAB)</td>
    </tr>
    <tr>
      <td>Wednesday</td>
      <td>WT/DCF (LAB)</td>
      <td>WT/DCF (LAB)</td>
      <td>WT/DCF (LAB)</td>
      <td>CO</td>
      <td>Prog-C</td>
      <td>Prog-C</td>
    </tr>
    <tr>
      <td>Thursday</td>
      <td>WT LAB</td>
      <td>DBMS/C (LAB)</td>
      <td>DBMS/C (LAB)</td>
      <td>DBMS/C (LAB)</td>
      <td>CO</td>
      <td>CO</td>
    </tr>
    <tr>
      <td>Friday</td>
      <td>WT/DCF (LAB)</td>
      <td>WT/DCF (LAB)</td>
      <td>WT/DCF (LAB)</td>
      <td>DCF</td>
      <td>DCF</td>
      <td>WT (LAB)</td>
    </tr>
  </table>

  <script>
    const timetable = {
      Monday: ["DCF", "DBMS", "DBMS", "DBMS/C (LAB)", "DBMS/C (LAB)", "DBMS/C (LAB)"],
      Tuesday: ["Prog-C", "CO", "CSH (LAB)", "CSH (LAB)", "CSH (LAB)", "CSH (LAB)"],
      Wednesday: ["WT/DCF (LAB)", "WT/DCF (LAB)", "WT/DCF (LAB)", "CO", "Prog-C", "Prog-C"],
      Thursday: ["WT LAB", "DBMS/C (LAB)", "DBMS/C (LAB)", "DBMS/C (LAB)", "CO", "CO"],
      Friday: ["WT/DCF (LAB)", "WT/DCF (LAB)", "WT/DCF (LAB)", "DCF", "DCF", "WT (LAB)"]
    };

    const scheduleNotification = (time, message) => {
      const now = new Date();
      const delay = time - now;
      if (delay > 0) {
        setTimeout(() => {
          new Notification("Timetable Alert", { body: message });
        }, delay);
      }
    };

    const notifyForToday = () => {
      const now = new Date();
      const day = now.toLocaleDateString("en-US", { weekday: 'long' });
      const subjects = [...new Set(timetable[day])].join(" | ");
      new Notification("Today's Schedule", { body: subjects });
    };

    const requestNotificationPermission = () => {
      if (Notification.permission === "granted") {
        notifyForToday();
      } else if (Notification.permission !== "denied") {
        Notification.requestPermission().then(permission => {
          if (permission === "granted") {
            notifyForToday();
          }
        });
      }
    };

    const setupDailyNotifications = () => {
      const now = new Date();
      now.setHours(8, 0, 0, 0); // Set to 8:00 AM
      if (now < new Date()) now.setDate(now.getDate() + 1);
      setTimeout(() => {
        notifyForToday();
        setInterval(notifyForToday, 24 * 60 * 60 * 1000); // Repeat every 24 hours
      }, now - new Date());
    };

    requestNotificationPermission();
    setupDailyNotifications();

    // Example: Schedule a notification for a specific period
    const periods = [
      { time: "09:15", message: "First Period - DCF" },
      { time: "10:15", message: "Second Period - DBMS" },
      { time: "11:30", message: "Third Period - DBMS" },
      { time: "13:15", message: "Fourth Period - DBMS/C (LAB)" },
      { time: "14:15", message: "Fifth Period - DBMS/C (LAB)" },
      { time: "15:15", message: "Sixth Period - DBMS/C (LAB)" },
    ];

    const today = new Date().toLocaleDateString("en-US", { weekday: 'long' });
    timetable[today].forEach((subject, index) => {
      const [hours, minutes] = periods[index].time.split(":").map(Number);
      const notificationTime = new Date();
      notificationTime.setHours(hours, minutes, 0, 0);
      scheduleNotification(notificationTime, periods[index].message);
    });
  </script>
</body>
</html>
